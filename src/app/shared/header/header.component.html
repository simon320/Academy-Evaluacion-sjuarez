<header class="sticky top-0 z-5">
    <p-menubar>
        <div class="flex align-content-center justify-content-center h-3rem">
            <h2 class="m-0 mr-3 mt-1 h-1rem"> {{ currentUser.username }} </h2>
            <button pButton (click)="showEditUser()" class="p-button-outlined mr-2" icon="pi pi-cog"></button>
            <button pButton (click)="logout()" label="Cerrar sesion" icon="pi pi-power-off"></button>
        </div>
    </p-menubar>
</header>

<section *ngIf="modalEdit" class="container-form">

        <form (ngSubmit)="saveChanges()" class="form relative p-6" [formGroup]="editForm"  autocomplete="off">
            <button pButton (click)="close()" class="p-button-outlined mr-2 mt-2 absolute top-0 right-0" icon="pi pi-times"></button>
            <!-- Nombre -->
            <div class="col-12 md:col-8 m-auto field">
                <label class="block">Nombre de Usuario</label>
                <div class="p-inputgroup flex relative">
                    <span class="p-inputgroup-addon"><em class="pi pi-user"></em></span>
                    <input
                        pInputText 
                        type="text" 
                        placeholder="Nombre de Usuario"
                        formControlName="username"> 
                    <em 
                        *ngIf="inputValid('username')"
                        style="color: #00ff00" 
                        class="pi pi-check green-400 absolute right-0 align-self-center mr-2 z-5 scalein fadein">
                    </em>
                </div>
    
                <div class="h-1rem">
                    <small *ngIf="inputInvalid('username')" class="text-center p-error block">
                        {{ userErrorMsg }}
                    </small>        
                </div>    
            </div>
    
            <!-- Email -->
            <div class="col-12 md:col-8 m-auto field">
                <label class="block">Email</label>
                <div class="p-inputgroup flex relative">
                    <span class="p-inputgroup-addon"><em class="pi pi-envelope"></em></span>
                    <input 
                        pInputText 
                        type="text" 
                        placeholder="Email"
                        formControlName="email">
                    <em 
                        *ngIf="inputValid('email')"
                        style="color: #00ff00" 
                        class="pi pi-check absolute right-0 align-self-center mr-2 z-5 scalein fadein">
                    </em> 
                    <p-progressSpinner *ngIf="editForm.pending" class="absolute green-400 right-0 align-self-center mr-2 z-5 scalein fadein" [style]="{width: '25px', height: '25px'}" styleClass="custom-spinner" strokeWidth="6" fill="var(--surface-ground)" animationDuration="1s"></p-progressSpinner>
                </div>
                <div class="h-1rem">
                    <small 
                        *ngIf="inputInvalid('email')"
                        class="text-center p-error block"> 
                        {{ emailErrorMsg }}
                    </small>
                </div>     
            </div>
    
            <!-- Contraseña -->
            <div class="col-12 md:col-8 m-auto field">
                <label class="block">Contraseña</label>
                <div class="p-inputgroup flex relative">
                    <span class="p-inputgroup-addon"><em class="pi pi-lock"></em></span>
                    <input 
                        pInputText
                        type="text" 
                        placeholder="Contraseña"
                        formControlName="password">
                    <em 
                        *ngIf="inputValid('password')"
                        style="color: #00ff00" 
                        class="pi pi-check green-400 absolute right-0 align-self-center mr-2 z-5 scalein fadein">
                    </em>
                </div>
                <div class="h-1rem">
                    <small 
                        *ngIf="inputInvalid('password')"
                        class="text-center p-error block"> 
                        {{ passErrorMsg }} 
                    </small>
                </div>
            </div>
    
    
            <!-- Boton -->
            <div class="col-12 md:col-8 m-auto max-w-full">
                <div class="p-inputgroup flex align-items-center justify-content-center">
                    <button 
                        pButton 
                        type="submit" 
                        label="Guardar cambios"></button>
                </div>
            </div>
            <div class="col-12 md:col-4 m-auto max-w-full">
                <div *ngIf="success" class="p-inputgroup flex flex-column align-items-center justify-content-center scalein fadein">
                    <p-message severity="success" text="Datos editados con exito."></p-message>
                    <p-progressSpinner class="mt-3 scalein fadein" [style]="{width: '45px', height: '45px'}" styleClass="custom-spinner" strokeWidth="5" fill="#25364d" animationDuration=".9s"></p-progressSpinner>
                </div>
    
                <div *ngIf="error" class="p-inputgroup flex flex-column align-items-center justify-content-center scalein fadein">
                    <p-message severity="error" text="El usuario no se puedo editar"></p-message>
                </div>

            </div>
    </form>
</section>

<router-outlet></router-outlet>