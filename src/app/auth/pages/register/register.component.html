<div class="flex flex-column justify-content-center h-screen">

    <form (ngSubmit)="createRegister()" [formGroup]="registerForm" autocomplete="off">

        <!-- Nombre -->
        <div class="col-12 md:col-4 m-auto">
            <div class="p-inputgroup flex relative">
                <span class="p-inputgroup-addon"><em class="pi pi-user"></em></span>
                <input
                    pInputText 
                    type="text" 
                    placeholder="Nombre de Usuario"
                    formControlName="username"> 
                <em 
                    *ngIf="inputValid('username')"
                    style="color: #00ff00" 
                    class="pi pi-check green-400 absolute right-0 align-self-center mr-2 z-5 scalein fadein">
                </em>
            </div>

            <div class="h-1rem">
                <small *ngIf="inputInvalid('username')" class="text-center p-error block">
                    {{ userErrorMsg }}
                </small>        
            </div>    
        </div>

        <!-- Email -->
        <div class="col-12 md:col-4 m-auto">
            <div class="p-inputgroup flex relative">
                <span class="p-inputgroup-addon"><em class="pi pi-envelope"></em></span>
                <input 
                    pInputText 
                    type="text" 
                    placeholder="Email"
                    formControlName="email">
                <em 
                    *ngIf="inputValid('email')"
                    style="color: #00ff00" 
                    class="pi pi-check absolute right-0 align-self-center mr-2 z-5 scalein fadein">
                </em> 
                <p-progressSpinner *ngIf="registerForm.pending" class="absolute green-400 right-0 align-self-center mr-2 z-5 scalein fadein" [style]="{width: '25px', height: '25px'}" styleClass="custom-spinner" strokeWidth="6" fill="var(--surface-ground)" animationDuration="1s"></p-progressSpinner>
            </div>
            <div class="h-1rem">
                <small 
                    *ngIf="inputInvalid('email')"
                    class="text-center p-error block"> 
                        {{ emailErrorMsg }}
                </small>
            </div>     
        </div>

        <!-- Contraseña -->
        <div class="col-12 md:col-4 m-auto">
            <div class="p-inputgroup flex relative">
                <span class="p-inputgroup-addon"><em class="pi pi-lock"></em></span>
                <input 
                    pInputText
                    type="password" 
                    placeholder="Contraseña"
                    formControlName="password">
                <em 
                    *ngIf="inputValid('password')"
                    style="color: #00ff00" 
                    class="pi pi-check green-400 absolute right-0 align-self-center mr-2 z-5 scalein fadein">
                </em>
            </div>
            <div class="h-1rem">
                <small 
                    *ngIf="inputInvalid('password')"
                    class="text-center p-error block"> 
                    {{ passErrorMsg }} 
                </small>
            </div>
        </div>

        <!-- Confirmacion de contraseña -->
        <div class="col-12 md:col-4 m-auto">
            <div class="p-inputgroup flex relative">
                <span class="p-inputgroup-addon"><em class="pi pi-lock"></em></span>
                <input 
                    pInputText
                    type="password" 
                    placeholder="Repita la contraseña"
                    formControlName="password2">
                <em 
                    *ngIf="inputValid('password') && inputValid('password2')"
                    style="color: #00ff00" 
                    class="pi pi-check green-400 absolute right-0 align-self-center mr-2 z-5 scalein fadein">
                </em>
            </div>
            <div class="h-1rem">
                <small 
                    *ngIf="inputInvalid('password2')"
                    class="text-center p-error block"> 
                        Las contraseñas no coinsiden. 
                </small>
            </div>
        </div>

        <!-- Boton submit -->
        <div class="col-12 md:col-4 m-auto max-w-full">
            <div class="p-inputgroup flex align-items-center justify-content-center">
                <button 
                    pButton 
                    [disabled]="registerForm.pending" 
                    type="submit" 
                    label="Crear" 
                    class="p-button-info"></button>
            </div>
        </div>

        <!-- Mensajes y rutas -->
        <div class="col-12 md:col-4 m-auto max-w-full">
            <div *ngIf="success" class="p-inputgroup flex flex-column align-items-center justify-content-center scalein fadein">
                <p-message severity="success" text="Usuario creado con exito"></p-message>
                <p-progressSpinner class="mt-3 scalein fadein" [style]="{width: '45px', height: '45px'}" styleClass="custom-spinner" strokeWidth="8" fill="var(--surface-ground)" animationDuration="1s"></p-progressSpinner>
            </div>

            <div *ngIf="error" class="p-inputgroup flex flex-column align-items-center justify-content-center scalein fadein">
                <p-message severity="error" text="El usuario no se pudo crear"></p-message>
            </div>
            
            <div class="p-inputgroup flex align-items-center justify-content-center">
                <h4>¿Ya tenes una cuenta registrada? <a routerLink="/auth/login">Ingresar</a></h4>
            </div>
        </div>

    </form>
</div>
